#  Executor 프레임워크

Executors는 JDK에서 제공하는 framework로서 Java application에서 실행되는 task를 간단하게 비동기로 처리할 수 있게 해주는 thread-pool과 API를 제공한다.

~~~
public interface Executor {
	void execute(Runnable command);
}
~~~

Executor는 굉장히 단순한 인터페이스로 보이지만, 아주 다양한 여러 가지 종류의 작업 실행 정책을 지원하는 유연하면서도 강력한 비동기적 작업 실행 프레임워크의 근간을 이루는 인터페이스이다.



## 왜쓰나

> Java application 에서 thread를 한 두개 만들어 돌리는 것은 어렵지 않지만 그 수가 많아질경우 어떻게 관리할 것인지 문제가 된다. 이 문제를 Executors framework을 통해 처리가 가능하다.

Executor 인터페이스를 구현한 클래스는 작업의 라이프 사이클을 관리하는 기능도 갖고 있고, 몇 가지 통계 값을 뽑아내거나 또는 애플리케이션에서 작업 실행 과정을 관리하고 모니터링하기 위한 기능도 갖고 있다.

Executor의 구조는 **프로듀서-컨슈머 패턴**에 기반하고 있으며, 작업을 생성해 등록하는 클래스가 프로듀서가 되고 작업을 실제로 실행하는 스레드가 컨슈머가 되는 모양을 갖추고 있다. 일반적으로 프로듀서-컨슈머 패턴을 애플리케이션에 적용해 구현할 수 있는 가장 쉬운 방법이 바로 Executor 프레임워크를 사용하는 방법이다.

> - 프로듀서(Producer) - 작업 또는 데이터를 생성하여 작업 큐로 전달하는 역할
> - 작업 큐 - 전달받은 작업 또는 데이터를  FIFO 형태로 관리하는 역할, 동시성을 관여하는 클래스
> - 컨슈머(Consumer) - 작업 큐에 등록된 작업 또는 데이터를 전달 받아 소비하는 역할



## 기능

1. Thread 생성 -  thread를 생성하거나 thread pool을 만드는 method를 제공
2. Thread 관리 - thread의 생명주기를 관리. 
   thread pool이 활성화되어 있는지 죽은 상태인지에 대해 고려하지 않아도 되게끔 thread를 관리
   - 스레드에서 실행되기를 기다리는 태스크 수를 제어하는 작업자 스레드 풀과 큐를 설정한다.
   - 비정상적으로 종료되는 스레드를 초래하는 에러를 확인한다.
   - 완료되는 스레드를 기다리고 스레드로부터 결과를 가져온다.
   - 스레드의 일괄 처리를 실행하고 고정된 순서로 결과를 가져온다.
   - 사용자가 더 빨리 결과를 확인할 수 있도록 알맞은 시간에 백그라운드 스레드를 시작한다.

3. Task 제출 및 실행 - Runnable 혹은 Callable method를 제출하고 그것을 원하는 때에 실행할 수 있게 해준다.

   **Executor는 작업 등록과 작업 실행을 분리하는 표준적인 방법이며**, 각 작업은 Runnable의 형태로 정의한다.

   - Executor가 제어할 수 있는 사항
     - 태스크 큐잉
     - 태스크 실행 순서
     - 태스크 실행 유형 (직렬 또는 동시)

   

## Reference

 https://engkimbs.tistory.com/589