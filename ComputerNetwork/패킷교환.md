### 패킷 교환

네트워크 응용에서 종단 시스템들은 서로 메세지를 교환

메세지는 제어 기능 & 데이터를 포함

송신 종단 시스템에서 목적지 종단시스템으로 메세지를 보내기 위해 => 송신시스템은 긴 메시지를 패킷이라고 알려진 작은 덩어리로 분할

패킷은 송신측과 수신측 사이에서 통신링크& 패킷스위치( 라우터와 링크 계층 스위치)를 거친다

- **송신 종단 시스템 또는 패킷 스위치가 R bit/sec으 속도로 링크상에서 L bits의 패킷을 송신한다면, 그 패킷을 전송하는데 걸리는 시간은 S/R 초.**

~~~
패킷 :링크의 최대 전송속도와 같은 속도로 가각의 통신 링크상에서 전송
~~~

1. 저장 후 전달

   패킷스위치 => 저장 후 전달 전송방식을 이용

   // 스위치가 출력 링크로 패킷의 첫 비트를 전송하기 전에 전체 패킷을 받아야 함

   라우터는 입력되는 패킷을 출력링크로 교환한다.

   저장후 전달하는 방법을 사용하면 송신시스템이 패킷의 일부분을 전송하고 패킷의 앞부분이 라우터에 도착 하더라도 라우터는 바로 전송하지 않고 패킷의 모든 비트를 수신 한 후에 전송(forward)한다.

   전파지연이 없다면 송신시스템에서 송신 + 수신시스템에서 수신 하는데 경과한 시간은 2L/R이 되고  만약 스위치에 비트가 도착 하자마자 전송한다면 비트가 라우터에서 지연되지 않아 전체 지연은 L/R이 된다

   ~~~
   ex) 소스로부터 목적지 노드까지 N개의 링크로 구성, 각각은 R 전송속도를 갖는 경로를 텅해 하나의 패킷을 전송하는 일반적 경우 
   d 종단간지연 = N(L/R)
   ~~~

2. 큐잉 지연과 패킷 손실

   **큐잉지연** : 각 링크에 대해 패킷스위치는 출력 버퍼를 가지고 있다. 패킷이 한 링크로 전송될 필요가 있는데 그 링크가 다른 패킷을 전송하고 있다면, 도착하는 패킷은 출력버퍼에서 대기해야 한다

   **패킷손실** : 지연은 가변적이고 네트워크 혼잡도에 따라 다르지만 유한한 버퍼 공간에 전송 대기중인 패킷들로 꽉 차 있는 경우 도착하는 패킷이나 큐에 대기중인 패킷을 패기(drop)한다.

3. 전단 테이블과 라우팅 프로토콜

   라우터 : 접속된 통신 링크 중 하나로 도착하는 패킷을 받아서 접속된 통신 링크 중 다른 링크로 그 패킷을 전달하는 것

   **라우팅이 인터넷에서 실행되는 과정**

   인터넷에서 모든 종단 시스템은 IP주소를 갖는다. 소스는 패킷의 헤더의 목적지인 ip주소를 포함하고 있고 이 주소는 계층적 구조를 가진다. 각 라우터는 목적지 주소를 라우터의 츨력 링크로 맵핑하는 전달테이블을 가지고 있다. 패킷이 라우터에 도착하면, 라우터는 올바른 출력 링크 찾기위해 주소를 조사 ->목적지 주소를 이용해 전달 테이블에서 출력링크를 찾아 보낸다.
