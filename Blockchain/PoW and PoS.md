# PoW 

비트코인으로 이루어진 모든 거래는 블록안의 블록체인에 저장이 된다.

블록체인 상에 존재하는 블록의 유효성을 검증하는 방식을 PoW(Proof of Work) 즉, 작업증명이라고 부른다.



- 비트코인에서 PoW란 Nonce 값을 찾아내 거래의 유효성을 증명하는 것 이다.

  (비트코인에서 Nonce값을 찾아낸 사람은 거래의 유효성을 증명해 준 것에 대한 대가로 비트코인을 받게 되는 것)

  - 블록의 구조
    - Version(버전 값 : 소프트웨어 버전과 동일)
    - Pre Block Hash(이전 덩어리 값)
    - Merkle Hash(이진 암호 값)
    - Timestamp(생성시간)
    - Bits(난이도 설정 값)
    - Nonce(임의의 값)

### PoW의 장점

- **강한 보안성**

  PoW는 기본적으로 1개의CPU당 1개의투표권을 가지기 때문에 공격자가 악의적으로 블록체인상의 거래내역을 조작하고자 한다면 51%의 지분을 확보해야 하고,이것을 51%Attack 이라고 한다. PoW기반의 블록체인을 공격자가 조작하려 한다면 51%이상의 컴퓨팅 파워를 확보해야 한다.

  전 세계의 51%의 CPU를 확보하려면 비용이 매우 많이 들지만 이로인해 얻는 이익은 들인 비용보다 적기 때문에 이것이 PoW의 기본 매커니즘이 된다. 

### PoW의 단점

- 공격자가 제3자와 연합하여 51%의 컴퓨팅 파워를 획득 하였을 때 

  비트코인은 Nonce를 만드는 데 ``SHA-256``이라는 방식을 활용한다. Top3 마이닝풀의 컴퓨터파워가 전체의 50%에 육박하기 때문에 이들이 연합한다면 비트코인의 보안성은 급격히 약화되게 된다.

  - ``SHA-256`` 이란?

    nonce 값을 풀기 위한 공식은 따로 없으며 채굴자가 숫자를 하나하나씩 넣어 보는 것이다. 블록의 nonce값을 찾기 위해서는 평균 수천조 이상의 시도가 필요하며, 이를 한명이 시도하기는 불가능하다. 때문에 특정 단체에 자신의 컴퓨팅파워를 할당해주고 해당 단체에서 채굴에 성공한 경우 컴퓨터파워를 할당한 양만큼 비트코인을 나눠받는 방식이 많이 이용되고 이 단체를 **마이닝 풀 **이라고 부른다.

- 환경문제

  비트코인 채굴을 위해서는 평균 수천조 번 이상의 시도가 필요하기 때문에 블필요한 자원이 많이 투입되어 무의미한 에너지 소비가 증가하여 많은 양의 전기가 사용되게 되고, 따라서 에너지 소비량이 많아지게 된다.



# PoS

Proof of stake : 지분증명 

 PoS는 코인의 지분을 투입하는 리소스라고 보면, PoW의 구체적인 하나의 종류라고 볼 수 있다.(실제로 PoS의 알고리즘 공식은 '다이제스트를 사용한 PoW'로 표현된다.)
  
 PoS에서 블록체인 상의 블록에 대한 유효성을 검증하는 방식은 컴퓨팅파워가 아닌 지분으로, 컴퓨팅 파워를 통한 채굴이 필요하지 않다. 
  
  예를 들어 이더리움100개를 가지고 있는 사람은 이더리움1개 가지고 있는 사람에 비해 100배의 투표권을 가지게 된다
  
 PoW 기반의 블록체인에서 블록의 유효성을 확인하고 새로운 블록을 만드는 과정을 **채굴(Mining)**이라고 한다면 PoS 기반의 블록체인에서는 **단조(Forging)**이라고 부른다.
  
PoS 블록체인에서는 단조한 사람이 거래 수수료만을 가져가고, 다른 사람들에게는 이자와 유사한 방식으로 코인이 지급된다. **일정 양 이상의 코인을 보관하고 있는 지갑을 블록체인 네트워크와 연결시킬 경우 보상을 받을 수 있다.**
  
비트코인이 채굴 할 때 마다 새로운 코인이 생성되는 것에 반해, 처음에 발행된 화폐의 양이 변동되지 않는다.
  
블록체인의 단조자는 새로운 화폐가 아닌 블록거래의 수수료를 얻게 되며 특정 알고리즘(주로 Randomizwed block selection , Coin Age based selection)에 의해 선택된다.



### PoS 장점

- 환경친화적이다
- 공격자가 51% Attack을 시도할 경우 PoW에 비해 PoS 공격자가 훨씬 큰 비용을 지불해야 한다

### PoS 단점

- 보안성에 대한 검증이 완전히 끝나지 않았다

  PoS에 대해 공격이 발생할 경우 해당 화폐가 손실될 수 있다.

- 지분이 많을수록 더 유리해지는 방식이므로 노드들이 토큰을 수집하기만 하고 사용하지 않으려는 경향이 나타 날 수 있다. 

  - 오래된 토큰의 지분평가를 떨어뜨리는 ' ‘Proof of Stake Velocity'라는 방식이 제안되고 있음

- 필요한 자원의 투입 cost가 너무 저렴하여 아무 것도 수행하지 않는 문제(Nothing at Stake)’ 가 발생할 수 있다.

- 첫 번째 블록에 해당하는 제네시스 블록 시점에서 바라본다면 지분이 100%에 달하기 때문에 시스템을 개시한 사함은 몇번이든 전체 블록을 다시 만들어 낼 수 있다. 그 외의 각 노드들도 지분만 갖고 있으면 그 시점부터 다시 시작하는 것이 가능하기 때문에 PoS만으로는 위변조를 막을 수 없다

  - 블록을 생성하는 코스트가 너무 낮기 때문에 이전 블록들로 거슬러 올라가서 현재까지의 모든 체인을 위변조할 수 있는 가능성이 존재함.

# 하이브리드 모델

최근에는 PoW와 PoS를 한 네트워크에서 동시에 수행하는 것으로 각각의 특징을 살려주도록 하는 방법이 쓰인다.

 한 네트워크에서 동시에 수행하기에는 어려움이 많고 안정성 문제가 발생하여 동시에 수행하기 보다 초반에  PoW로 많은 화폐를 채굴한 후 어느정도 후에 PoS로 전환하는 하이브리드 방식을 고려하고 잇다.
 
 
 ## Reference
 https://brunch.co.kr/@genier/11
 
